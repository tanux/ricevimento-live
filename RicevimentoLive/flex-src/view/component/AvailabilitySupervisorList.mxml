<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark" 
		  xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="200"
		  title="Elenco Disponibilita Relatore" cornerRadius="10"
		  paddingBottom="5" paddingTop="5" paddingRight="5" paddingLeft="5"
		  creationComplete="facade.sendNotification(ApplicationFacade.GET_AVAILABILITY_SUPERVISOR,this)">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->         
	</fx:Declarations>
	<fx:Script>
		<![CDATA[                                               
			import model.vo.Timewindow;
			
			import mx.collections.ArrayCollection;
			import mx.containers.TitleWindow;
			import mx.controls.Alert;
			import mx.events.CloseEvent;
			import mx.events.ItemClickEvent;
			import mx.managers.PopUpManager;
			
			import view.dashboarduser.ConfirmBookingWindowMediator;
			
			var facade:ApplicationFacade = ApplicationFacade.getInstance() as ApplicationFacade;
			[Bindable] public var availabilitylist:ArrayCollection;
			private var confirmBookingTitleWindow:TitleWindow;
			private function popUp(aviabilitySelected:Timewindow):void {
				confirmBookingTitleWindow = PopUpManager.createPopUp(this.parent.parent, ConfirmBookingWindow, true) as TitleWindow;                            
				PopUpManager.centerPopUp(confirmBookingTitleWindow);                    
				confirmBookingTitleWindow.addEventListener(CloseEvent.CLOSE, confirmBookingTitleWindowClose);
				facade.sendNotification(ApplicationFacade.AVAILABILITY_SELECTED, aviabilitySelected);
			}
			private function confirmBookingTitleWindowClose(evt:CloseEvent):void {
				PopUpManager.removePopUp(confirmBookingTitleWindow);
			}
		]]>
	</fx:Script>
	<s:Label width="100%" text="Stai visualizzando l'elenco degli orari ancora disponibili per il relatore selezionato"/>
	<mx:HRule width="100%"/>        
	<mx:VBox width="100%" height="100%">
		<mx:Repeater id="availabilitySupervisor" dataProvider="{availabilitylist}">
			<mx:VBox width="100%">
				<mx:HBox width="100%" paddingBottom="5" verticalAlign="middle">
					<mx:Box width="80%">
						<mx:Text id="availabilityEnabled" text="#{String(availabilitySupervisor.currentItem.id)}:{String(availabilitySupervisor.currentItem.window)}" />        
					</mx:Box>
					<mx:Box width="20%">
						<mx:Button label="Prenota" id="btnPrenota" click="popUp(event.currentTarget.getRepeaterItem());" />     
					</mx:Box>
				</mx:HBox>
				<mx:HRule width="100%" />
			</mx:VBox>
		</mx:Repeater>                  
	</mx:VBox>
</mx:Panel>
